
# Set prefix key (Ctrl+W)
set -g prefix C-w
# Unbind default prefix (Ctrl+B)
unbind-key C-b
# Send prefix to nested session (Ctrl+W)
bind-key C-w send-prefix

# Switch to last active window (Prefix Ctrl+W)
bind-key C-w last-window

# Don't wait for escape codes, just GO
set -sg escape-time 0

# Start windows and panes at 1, not 0
set -g base-index 1
set -g pane-base-index 1
set-window-option -g pane-base-index 1
# Stay in tmux when a session is destroyed
set -g detach-on-destroy off

# Renumber windows when one is closed
set -g renumber-windows on
# NeoVim said to do it
set -g focus-events on

# Setup terminal and colors
set -g default-terminal "tmux-256color"
set -as terminal-features ",xterm-256color:RGB"

# VI keys for tmux copy mode
set -g status-keys vi
set-window-option -g mode-keys vi

#######################################################
# Key Bindings
#######################################################

# Begin selection in copy mode (v)
bind-key -T copy-mode-vi 'v' send -X begin-selection
# Toggle rectangle selection in copy mode (V)
bind-key -T copy-mode-vi 'V' send -X rectangle-toggle
# Copy selection and exit copy mode (y)
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# Set Window Titles
set -g set-titles off

# Reload tmux config (Ctrl+Alt+R)
bind -n C-M-r source-file ~/.config/tmux/tmux.conf \; display "Config reloaded!"

# Focus pane left (Alt+H)
bind -n M-h select-pane -L
# Focus pane down (Alt+J)
bind -n M-j select-pane -D
# Focus pane up (Alt+K)
bind -n M-k select-pane -U
# Focus pane right (Alt+L)
bind -n M-l select-pane -R

# Resize pane left (Ctrl+Alt+H)
bind -n C-M-h resize-pane -L 4
# Resize pane down (Ctrl+Alt+J)
bind -n C-M-j resize-pane -D 4
# Resize pane up (Ctrl+Alt+K)
bind -n C-M-k resize-pane -U 4
# Resize pane right (Ctrl+Alt+L)
bind -n C-M-l resize-pane -R 4

# Split pane horizontally (Alt+/)
bind -n M-/ split-window -v -c "#{pane_current_path}"
# Split pane vertically (Alt+\)
bind -n M-\\ split-window -h -c "#{pane_current_path}"

# Cycle to previous layout (Alt+,)
bind -n M-, previous-layout
# Cycle to next layout (Alt+.)
bind -n M-. next-layout

# Kill current pane (Ctrl+Alt+Q)
bind -n C-M-q kill-pane

# Enter copy mode (Alt+G)
bind -n M-g copy-mode
# Paste buffer (Alt+V)
bind -n M-v paste-buffer

# Toggle pane synchronization (Alt+A)
bind -n M-a setw synchronize-panes

# New window in current path (Alt+N)
bind -n M-n new-window -c "#{pane_current_path}"

# Previous window (Alt+U)
bind -n M-u previous-window
# Next window (Alt+I)
bind -n M-i next-window

# Swap window left (Alt+Y)
bind -n M-y swap-window -t -1 \; previous-window
# Swap window right (Alt+O)
bind -n M-o swap-window -t +1 \; next-window

# Select session
bind -n M-t display-popup -E -w 40% "sesh connect \"$(
 sesh list -i | gum filter --limit 1 --no-sort --fuzzy --placeholder 'Pick a sesh' --height 50 --prompt='âš¡'
)\""
# Rename window (Ctrl+Alt+T)
bind -n C-M-t command-prompt -I "#W" "rename-window '%%'"
# Rename session (Ctrl+Alt+S)
bind -n C-M-s command-prompt -I "#S" "rename-session '%%'"
# Set pane title (Ctrl+Alt+P)
bind -n C-M-p command-prompt -p "New title:" 'select-pane -T "%%"'

# Select window 1 (Alt+Z)
bind -n M-z select-window -t 1
# Select window 2 (Alt+X)
bind -n M-x select-window -t 2
# Select window 3 (Alt+C)
bind -n M-c select-window -t 3
# Select window 4 (Alt+V)
bind -n M-v select-window -t 4
# Select window 5 (Alt+B)
bind -n M-b select-window -t 5

# Select window 1 (Alt+1)
bind -n M-1 select-window -t 1
# Select window 2 (Alt+2)
bind -n M-2 select-window -t 2
# Select window 3 (Alt+3)
bind -n M-3 select-window -t 3
# Select window 4 (Alt+4)
bind -n M-4 select-window -t 4
# Select window 5 (Alt+5)
bind -n M-5 select-window -t 5
# Select window 6 (Alt+6)
bind -n M-6 select-window -t 6
# Select window 7 (Alt+7)
bind -n M-7 select-window -t 7
# Select window 8 (Alt+8)
bind -n M-8 select-window -t 8
# Select window 9 (Alt+9)
bind -n M-9 select-window -t 9
# Select window 10 (Alt+0)
bind -n M-0 select-window -t 10


# Show pane info at top of each pane
set -g pane-border-status top
# Display pane index and title in border
set -g pane-border-format '#{pane_index} "#{pane_title}"'

# Catppuccin color scheme variant
set -g @catppuccin_flavour 'mocha'

# Increase scrollback buffers
set -g history-limit 10000

# Mouse settings
setw -g mouse on


# use a theme
set -g @tmux2k-theme 'catppuccin'
set -g @tmux2k-icons-only false

set -g @tmux2k-black '#1e1e2e'
set -g @tmux2k-gray '#45475a'
set -g @tmux2k-white '#cdd6f4'
set -g @tmux2k-light-blue '#89dceb'
set -g @tmux2k-blue '#89b4fa'
set -g @tmux2k-dark-blue '#526c96'
set -g @tmux2k-light-green '#94e2d5'
set -g @tmux2k-green '#a6e3a1'
set -g @tmux2k-dark-green '#638861'
set -g @tmux2k-light-orange '#fab387'
set -g @tmux2k-yellow '#fab387'
set -g @tmux2k-dark-orange '#966b51'
set -g @tmux2k-light-pink '#f5e0dc'
set -g @tmux2k-light-purple '#cba6f7'
set -g @tmux2k-dark-pink '#93748b'
set -g @tmux2k-purple '#b4befe'
set -g @tmux2k-dark-purple '#6c7298'
set -g @tmux2k-light-red '#eba0ac'
set -g @tmux2k-red '#f38ba8'
set -g @tmux2k-dark-red '#925365'
set -g @tmux2k-light-yellow '#f9e2af'
set -g @tmux2k-dark-yellow '#958869'

set -g @tmux2k-left-plugins "session cwd"
set -g @tmux2k-right-plugins "docker cpu ram"
set -g @tmux2k-refresh-rate 5

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin '2kabhishek/tmux2k'
set -g @plugin 'omerxx/tmux-floax'
set -g @plugin 'tmux-plugins/tmux-cpu'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.config/tmux/plugins/tpm/tpm'
